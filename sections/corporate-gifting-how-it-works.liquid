{% comment %} sections/header.liquid {% endcomment %}

{%- style -%}
  {% render 'corporate-gifting-how-it-works.css' %}
{%- endstyle -%}

<div
  class="how-it-works-tlnt"
  style="margin-top: {{ section.settings.margin_top }}px; margin-bottom: {{ section.settings.margin_bottom }}px;"
>
  {% if section.settings.main_image != blank %}
    <div class="how-it-works-tlnt__image-wrapper">
      <img
        width="100%"
        height="812"
        src="{{ section.settings.main_image | img_url: '800x' }}"
        alt="How it works image"
        class="how-it-works-tlnt__image"
        loading="lazy"
      >
    </div>
  {% endif %}
  <div class="how-it-works-tlnt__content">
    <h3 class="how-it-works-tlnt__title">{{ section.settings.title }}</h3>
    <h2 class="how-it-works-tlnt__punchline">{{ section.settings.punchline }}</h2>
    <p class="how-it-works-tlnt__description">{{ section.settings.description }}</p>
    <div class="how-it-works-tlnt__steps">
      {% for block in section.blocks %}
        <div class="how-it-works-tlnt__step-container">
          <div class="how-it-works-tlnt__index">
            {% if block.settings.show_index and block.settings.step_image == blank %}
              <span>{{ forloop.index | prepend: '0' }}</span>
            {% elsif block.settings.step_image != blank %}
              <img
                width="19"
                height="19"
                src="{{ block.settings.step_image | img_url: '60x60' }}"
                alt="Step image"
                loading="lazy"
              >
            {% endif %}
          </div>
          <div class="how-it-works-tlnt__step-details">
            <div class="how-it-works-tlnt__step-title">{{ block.settings.step_title }}</div>
            <div class="how-it-works-tlnt__step-description">{{ block.settings.step_description }}</div>
          </div>
        </div>
      {% endfor %}
    </div>
    {% if section.settings.cta_link != blank and section.settings.cta_text != blank %}
      <a href="{{ section.settings.cta_link }}" class="how-it-works-tlnt__cta">
        {{ section.settings.cta_text }}
      </a>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "How it Works",
  "tag": "section",
  "class": "how-it-works",
  "settings": [
    {
      "type": "image_picker",
      "id": "main_image",
      "label": "Main Image"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "Title"
    },
    {
      "type": "text",
      "id": "punchline",
      "label": "Punchline",
      "default": "Punchile"
    },
    {
      "type": "text",
      "id": "description",
      "label": "Description",
      "default": "Description"
    },
    {
      "type": "url",
      "id": "cta_link",
      "label": "Button Link"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "Button Text",
      "default": "Inquire Now"
    },
    {
      "type": "range",
      "id": "margin_top",
      "label": "Margin Top (px)",
      "min": 0,
      "max": 200,
      "step": 4,
      "default": 40
    },
    {
      "type": "range",
      "id": "margin_bottom",
      "label": "Margin Bottom (px)",
      "min": 0,
      "max": 200,
      "step": 4,
      "default": 40
    }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Step",
      "settings": [
        {
          "type": "checkbox",
          "id": "show_index",
          "label": "Show index?",
          "default": true
        },
        {
          "type": "image_picker",
          "id": "step_image",
          "label": "Step Image (optional)"
        },
        {
          "type": "text",
          "id": "step_title",
          "label": "Step Title",
          "default": "Step title"
        },
        {
          "type": "text",
          "id": "step_description",
          "label": "Step Description",
          "default": "Step description."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "How it Works",
      "blocks": [
        {
          "type": "step",
          "settings": {
            "show_index": true,
            "step_title": "Choose your gift",
            "step_description": "Select a set."
          }
        },
        {
          "type": "step",
          "settings": {
            "show_index": true,
            "step_title": "Add a note",
            "step_description": "Personalize your gift."
          }
        }
      ]
    }
  ]
}
{% endschema %}
